% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/allometries.R
\name{plot_allometries}
\alias{plot_allometries}
\title{Create comparison plots for allometry methods}
\usage{
plot_allometries(
  results_df,
  plot_type = "bar",
  returnv = "AGC",
  show_errors = TRUE,
  interactive = FALSE,
  log_scale = FALSE,
  color_scheme = "default",
  font_size = 12,
  size_scale = NULL,
  theme = NULL,
  jitter = TRUE,
  point_size = 2,
  x_min = NULL,
  x_max = NULL,
  y_min = NULL,
  y_max = NULL
)
}
\arguments{
\item{results_df}{Data frame with results from allometries function. Must contain columns for method estimates
(e.g., WCC_C_t, biomass_C_t, allodb_C_t, Bunce_C_t for AGC, or corresponding _B_t columns for AGB)
and optionally error columns (e.g., WCC_C_sig, biomass_C_sig, etc.)}

\item{plot_type}{Character string specifying the type of plot. Options: "bar" (bar chart comparing methods),
"dbh" (scatter plot against DBH), "height" (scatter plot against height), "tree_index" (scatter plot against tree index),
"density" (density distribution plot), or "residual" (residual plot showing differences from mean)}

\item{returnv}{Character string, either "AGC" for above ground carbon or "AGB" for above ground biomass.
The function will auto-detect if the specified type doesn't match available columns}

\item{show_errors}{Logical, whether to show error bars representing uncertainty estimates (default: TRUE)}

\item{interactive}{Logical, whether to return an interactive plotly plot instead of a static ggplot (default: FALSE)}

\item{log_scale}{Logical, whether to use logarithmic scale on y-axis. Only applies to scatter plots (dbh, height),
not bar plots, density plots, or residual plots (default: FALSE)}

\item{color_scheme}{Character string specifying the color scheme. Options: "default" (ggplot2 default colors),
"viridis" (viridis color palette), or "brewer" (RColorBrewer Set2 palette) (default: "default")}

\item{font_size}{Numeric value specifying the base font size for plot text in points (default: 12)}

\item{size_scale}{Character string or NULL. For scatter plots, specifies variable to map point size to:
"Height" maps size to height values, "DBH" maps size to DBH values, or NULL/"none" for fixed size points (default: NULL)}

\item{theme}{ggplot2 theme function to apply to the plot. Can be any ggplot2 theme function
(e.g., theme_classic, theme_gray, theme_light, theme_dark) or NULL to use default ggplot2 theme.
If NULL, defaults to theme_minimal with the specified font_size (default: NULL)}

\item{jitter}{Logical, whether to apply jitter to points and error bars in scatter plots (dbh, height).
Jitter helps prevent overplotting when multiple methods have similar values. The jitter width is calculated
as 2\% of the data range (x-axis), with a minimum of 0.1 units (default: TRUE)}

\item{x_min}{Numeric value, minimum x-axis value for axis limits (optional, default: NULL)}

\item{x_max}{Numeric value, maximum x-axis value for axis limits (optional, default: NULL)}

\item{y_min}{Numeric value, minimum y-axis value for axis limits (optional, default: NULL)}

\item{y_max}{Numeric value, maximum y-axis value for axis limits (optional, default: NULL)}
}
\value{
ggplot or plotly object depending on the interactive parameter. Returns NULL with a warning if no data
is available to plot or if no matching method columns are found in the results data frame.
}
\description{
Creates ggplot2 or plotly plots comparing different allometric methods (WCC, BIOMASS, allodb, Bunce).
Supports multiple plot types including bar charts, scatter plots, density plots, and residual plots.
}
\details{
This function creates visualizations comparing estimates from different allometric methods. For scatter plots
(dbh, height), jitter can be applied to points and error bars to prevent overplotting when multiple
methods have similar values. The jitter width is calculated as 2\% of the data range (x-axis), with a minimum
of 0.1 units. This helps distinguish overlapping points while maintaining the overall pattern of the data.

Interactive plots (when interactive = TRUE) display hover tooltips with formatted values: species name (if available),
method name, value (3 decimal places), and additional context-specific information (DBH, Height, Tree index, etc.).

The function will warn if log scale is selected but data contains values less than or equal to zero, as log scale
cannot display such values. It will also warn if some methods have no data available.
}
\examples{
results <- allometries(c("Quercus","Quercus"), c("robur","robur"), c(20, 30), c(10, 15))
plot_allometries(results, "bar", "AGC", interactive = FALSE)
}
\author{
Isabel Openshaw. I.Openshaw@kew.org
}
