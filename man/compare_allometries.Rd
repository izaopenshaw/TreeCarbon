% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/allometries.R
\name{compare_allometries}
\alias{compare_allometries}
\title{Comprehensive comparison of allometric methods}
\usage{
compare_allometries(
  df,
  methods = c("WCC", "BIOMASS", "allodb", "Bunce"),
  reference = "WCC",
  returnv = "AGC",
  ci_level = 0.95,
  aggregate = TRUE
)
}
\arguments{
\item{df}{Data frame with results from the \code{allometries()} function, containing
columns for each method's estimates and uncertainties (e.g., WCC_C_t, WCC_C_sig,
biomass_C_t, etc.).}

\item{methods}{Character vector specifying which methods to compare.
Options: "WCC", "BIOMASS", "allodb", "Bunce". Default is all four methods.}

\item{reference}{Character string specifying the reference method for computing
percent differences. Default is "WCC".}

\item{returnv}{Character string, either "AGC" for above-ground carbon or "AGB"
for above-ground biomass. Default is "AGC".}

\item{ci_level}{Numeric value between 0 and 1 specifying the confidence interval
level. Default is 0.95 (95\% CI).}

\item{aggregate}{Logical. If TRUE (default), returns aggregated totals across
all trees. If FALSE, returns per-tree comparison.}
}
\value{
A data frame with columns:
\describe{
\item{method}{Name of the allometric method}
\item{agb_t}{Above-ground biomass in tonnes (or carbon if returnv="AGC")}
\item{co2e_t}{CO2 equivalent in tonnes}
\item{ci_low}{Lower bound of confidence interval}
\item{ci_high}{Upper bound of confidence interval}
\item{pct_diff_vs_ref}{Percent difference compared to reference method}
\item{abs_diff_vs_ref}{Absolute difference compared to reference method}
\item{cv_pct}{Coefficient of variation as percentage}
\item{extrapolation}{Logical flag indicating if extrapolation may have occurred}
\item{ci_overlap}{Logical flag indicating if CI overlaps with reference method}
\item{assumptions_summary}{Human-readable summary of method assumptions}
\item{rank}{Ranking from lowest to highest estimate}
}

Additionally, attributes are attached with summary statistics:
\describe{
\item{cv_across_methods}{Coefficient of variation across all methods}
\item{range_min}{Minimum estimate across methods}
\item{range_max}{Maximum estimate across methods}
\item{spread}{Difference between max and min estimates}
\item{agreement_summary}{Summary of method agreement/disagreement}
}
}
\description{
Compares different allometric methods (WCC, BIOMASS, allodb, Bunce)
providing a detailed side-by-side comparison table with estimates, uncertainty,
percent differences, extrapolation flags, and method assumptions.
}
\details{
\strong{Method Assumptions:}
\itemize{
\item \strong{WCC (Woodland Carbon Code)}: UK-specific tariff-based allometry; assumes UK
species parameters; best for UK temperate woodlands.
\item \strong{BIOMASS}: Pantropical Chave et al. equations; uses wood density lookup;
designed for tropical forests but can estimate temperate.
\item \strong{allodb}: Multi-source allometric database; region-weighted equations;
extratropical focus; may lack coverage for some species.
\item \strong{Bunce}: Historic UK deciduous woodland equation; simple DBH-based model;
limited to specific UK broadleaf species.
}

\strong{Extrapolation Flags:}
Extrapolation is flagged when:
\itemize{
\item DBH or height values fall outside the calibration range of the method
\item Species/genus is not found in the method's reference database
\item Geographic region differs significantly from the method's development region
}
}
\examples{
# Run allometries for sample trees
results <- allometries(genus = c("Quercus", "Fagus", "Pinus"),
  species = c("robur", "sylvatica", "sylvestris"),
  dbh = c(45, 38, 52),
  height = c(18, 15, 22)
)

# Compare all methods with WCC as reference
comparison <- compare_allometries(results)
print(comparison)

# Save comparison table to CSV
# write.csv(comparison, "comparison_output.csv", row.names = FALSE)

# Save as RDS to preserve attributes
# saveRDS(comparison, "comparison_output.rds")

# Compare only WCC and BIOMASS methods
comparison_subset <- compare_allometries(results, methods = c("WCC", "BIOMASS"))

# Per-tree comparison
per_tree <- compare_allometries(results, aggregate = FALSE)

}
\references{
Jenkins, Thomas AR, et al. "FC Woodland Carbon Code: Carbon Assessment
Protocol (v2.0)." (2018).
Rejou-Mechain, M., et al. (2017). BIOMASS: an R package for estimating
above-ground biomass. Methods in Ecology and Evolution.
Gonzalez-Akre, E., et al. (2020). allodb: An R package for biomass
estimation at globally distributed extratropical forest plots.
Bunce, R.G.H. (1968). Biomass and Production of Trees in a Mixed
Deciduous Woodland.
}
\author{
Isabel Openshaw. I.Openshaw@kew.org
}
